<!DOCTYPE html><html lang="zh-TW" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>地端建置-Ollama-LLM | Weirou's Blog</title><meta name="author" content="Weirou Sun"><meta name="copyright" content="Weirou Sun"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="ffffff"><meta name="description" content="地端建置 Ollama LLMOllama介紹是甚麼？Ollama 是一個基於 Go 語言開發的開源框架，讓你可以快速在本地運行大型語言模型（Large Language Models，簡稱 LLM）。它的設計理念是讓使用者能夠輕鬆地在個人電腦上部署和使用各種 AI 語言模型，無需依賴雲端服務。  除了 Ollama 官方網站外，Ollama 也在 GitHub 上開源。 Ollama 提供了豐富">
<meta property="og:type" content="article">
<meta property="og:title" content="地端建置-Ollama-LLM">
<meta property="og:url" content="http://example.com/di-duan-jian-zhi-ollama-llm/">
<meta property="og:site_name" content="Weirou&#39;s Blog">
<meta property="og:description" content="地端建置 Ollama LLMOllama介紹是甚麼？Ollama 是一個基於 Go 語言開發的開源框架，讓你可以快速在本地運行大型語言模型（Large Language Models，簡稱 LLM）。它的設計理念是讓使用者能夠輕鬆地在個人電腦上部署和使用各種 AI 語言模型，無需依賴雲端服務。  除了 Ollama 官方網站外，Ollama 也在 GitHub 上開源。 Ollama 提供了豐富">
<meta property="og:locale" content="zh_TW">
<meta property="og:image" content="http://example.com/images/profilePhoto.jpg">
<meta property="article:published_time" content="2024-09-03T12:19:16.000Z">
<meta property="article:modified_time" content="2024-09-07T08:59:29.735Z">
<meta property="article:author" content="Weirou Sun">
<meta property="article:tag" content="python">
<meta property="article:tag" content="Ollama">
<meta property="article:tag" content="AI">
<meta property="article:tag" content="LLM">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/images/profilePhoto.jpg"><link rel="shortcut icon" href="/./img/favicon.png"><link rel="canonical" href="http://example.com/di-duan-jian-zhi-ollama-llm/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css?v=4.13.0"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":1,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '複製成功',
    error: '複製錯誤',
    noSupport: '瀏覽器不支援'
  },
  relativeDate: {
    homepage: true,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '剛剛',
    min: '分鐘前',
    hour: '小時前',
    day: '天前',
    month: '個月前'
  },
  copyright: {"limitCount":50,"languages":{"author":"作者: Weirou Sun","link":"連結: ","source":"來源: Weirou's Blog","info":"著作權歸作者所有。商業轉載請聯繫作者獲得授權，非商業轉載請註明出處。"}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切換為繁體中文","cht_to_chs":"你已切換為簡體中文","day_to_night":"你已切換為深色模式","night_to_day":"你已切換為淺色模式","bgLight":"#49b1f5","bgDark":"#1f1f1f","position":"top-center"},
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.11.1/dist/infinitegrid.min.js',
    buttonText: '載入更多'
  },
  isPhotoFigcaption: true,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: true,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '地端建置-Ollama-LLM',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-09-07 16:59:29'
}</script><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', 'ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
        if (t === 'dark') activateDarkMode()
        else if (t === 'light') activateLightMode()
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><meta name="generator" content="Hexo 7.1.1"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">載入中...</div></div></div><script>(()=>{
  const $loadingBox = document.getElementById('loading-box')
  const $body = document.body
  const preloader = {
    endLoading: () => {
      $body.style.overflow = ''
      $loadingBox.classList.add('loaded')
    },
    initLoading: () => {
      $body.style.overflow = 'hidden'
      $loadingBox.classList.remove('loaded')
    }
  }

  preloader.initLoading()
  window.addEventListener('load',() => { preloader.endLoading() })

  if (false) {
    document.addEventListener('pjax:send', () => { preloader.initLoading() })
    document.addEventListener('pjax:complete', () => { preloader.endLoading() })
  }
})()</script><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/../images/profilePhoto.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">4</div></a><a href="/tags/"><div class="headline">標籤</div><div class="length-num">5</div></a><a href="/categories/"><div class="headline">分類</div><div class="length-num">1</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('/../images/banner.jpg')"><nav id="nav"><span id="blog-info"><a href="/" title="Weirou's Blog"><span class="site-name">Weirou's Blog</span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">地端建置-Ollama-LLM</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">發表於</span><time class="post-meta-date-created" datetime="2024-09-03T12:19:16.000Z" title="發表於 2024-09-03 20:19:16">2024-09-03</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新於</span><time class="post-meta-date-updated" datetime="2024-09-07T08:59:29.735Z" title="更新於 2024-09-07 16:59:29">2024-09-07</time></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="地端建置-Ollama-LLM"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">閱讀量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="地端建置-Ollama-LLM"><a href="#地端建置-Ollama-LLM" class="headerlink" title="地端建置 Ollama LLM"></a>地端建置 Ollama LLM</h1><h1 id="Ollama"><a href="#Ollama" class="headerlink" title="Ollama"></a>Ollama</h1><h2 id="介紹"><a href="#介紹" class="headerlink" title="介紹"></a>介紹</h2><h3 id="是甚麼？"><a href="#是甚麼？" class="headerlink" title="是甚麼？"></a>是甚麼？</h3><p><a target="_blank" rel="noopener" href="https://ollama.com/">Ollama</a> 是一個基於 Go 語言開發的開源框架，讓你可以快速在本地運行大型語言模型（Large Language Models，簡稱 LLM）。它的設計理念是讓使用者能夠輕鬆地在個人電腦上部署和使用各種 AI 語言模型，無需依賴雲端服務。</p>
<p><img src="https://i.imgur.com/xUYiZEm.png" alt="Ollama Homepage"></p>
<p>除了 Ollama 官方網站外，Ollama 也在 <a target="_blank" rel="noopener" href="https://github.com/ollama/ollama">GitHub</a> 上開源。</p>
<p><img src="https://i.imgur.com/kkgy1k8.png" alt="Ollama Github"><br>Ollama 提供了豐富的模型庫，你可以透過 Ollama 官方網站上的 <a target="_blank" rel="noopener" href="https://ollama.com/library">Ollama Library</a> 找到並選擇想要建置的 Model。這大大簡化了獲取和使用不同 LLM 的過程。<br><img src="https://i.imgur.com/FTEAB0e.png" alt="Ollama Model library"></p>
<h3 id="優點"><a href="#優點" class="headerlink" title="優點"></a>優點</h3><p>Ollama 集結了眾多優點而被譽為「LLM 界的 Docker」：</p>
<ul>
<li><strong>多樣化安裝方式</strong>：適應不同用戶的需求和偏好。</li>
<li><strong>離線使用能力</strong>：可在無網絡環境下運行，適合處理敏感或機密信息。</li>
<li><strong>一鍵部署</strong>：快速在本地建置，無需依賴雲端服務。</li>
<li><strong>豐富的 Model Library</strong>：提供多種預訓練模型供選擇。</li>
<li><strong>內建 REST API</strong>：方便部屬後直接使用 HTTP 請求。</li>
<li><strong>跨平台支持</strong>：適用於多種操作系統（如 MacOS、Windows 和 Linux）。</li>
</ul>
<h2 id="安裝"><a href="#安裝" class="headerlink" title="安裝"></a>安裝</h2><h3 id="安裝方式"><a href="#安裝方式" class="headerlink" title="安裝方式"></a>安裝方式</h3><p>Ollama 提供了多種靈活的<a target="_blank" rel="noopener" href="https://ollama.com/download">安裝方式</a>，適應不同用戶的需求和偏好。除了支援各主要操作系統平台外，還提供了 Docker 安裝選項，讓部署過程更加便捷和統一。<br><img src="https://i.imgur.com/wShf2Kf.png" alt="Ollama Download"></p>
<p>具體的安裝選項包括：</p>
<ol>
<li><p><strong>Mac：</strong></p>
<ol>
<li>使用 Homebrew：<code>brew install ollama</code></li>
<li>直接<a target="_blank" rel="noopener" href="https://ollama.com/download/Ollama-darwin.zip">下載安裝包</a></li>
</ol>
</li>
<li><p>Windows：</p>
<ol>
<li>直接<a target="_blank" rel="noopener" href="https://ollama.com/download/OllamaSetup.exe">下載安裝包</a></li>
</ol>
</li>
<li><p><strong>Linux：</strong></p>
<ol>
<li><p>使用官方提供的安裝腳本</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -fsSL https://ollama.com/install.sh | sh</span><br></pre></td></tr></table></figure></li>
</ol>
</li>
<li><p><strong>Docker</strong>：</p>
<ol>
<li>使用官方 Docker image</li>
</ol>
</li>
</ol>
<h3 id="Docker-安裝-Ollama"><a href="#Docker-安裝-Ollama" class="headerlink" title="Docker 安裝 Ollama"></a>Docker 安裝 Ollama</h3><p>在此篇教學中將重點介紹使用 Docker 進行安裝。</p>
<ol>
<li><p>安裝 Docker：</p>
<p> 依照自身作業系統需求安裝 Docker。</p>
</li>
<li><p>拉取 Ollama image：</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull ollama/ollama</span><br></pre></td></tr></table></figure>
</li>
<li><p>執行 Ollama Container： </p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d -v ollama:/root/.ollama -p 11434:11434 --name ollama ollama/ollama</span><br></pre></td></tr></table></figure>
</li>
<li><p>驗證安裝→運行一個簡單的模型來測試 Ollama 是否正確安裝：</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="built_in">exec</span> -it ollama ollama run llama3.1</span><br></pre></td></tr></table></figure>
<p> <img src="https://i.imgur.com/G0q9pyl.png" alt="等待 Docker 安裝 Ollama"><br> 等待執行。</p>
</li>
<li><p>執行成功測試呼叫：</p>
<p> 執行成功將看到 Send a message，此時即可輸入一些字來與 AI 對話囉！欲結束對話，輸入 <code>/bye</code> 即可。<br> <img src="https://i.imgur.com/OQlXOWX.png" alt="測試執行 Ollama Model"></p>
</li>
</ol>
<h1 id="使用指定-LLM"><a href="#使用指定-LLM" class="headerlink" title="使用指定 LLM"></a>使用指定 LLM</h1><h2 id="選擇模型"><a href="#選擇模型" class="headerlink" title="選擇模型"></a>選擇模型</h2><p>如上所說，Ollama 提供許多 LLM 可使用，前往 <a target="_blank" rel="noopener" href="https://ollama.com/library">Ollama library</a> 頁面可尋找或搜尋指定 LLM。</p>
<p><img src="https://i.imgur.com/sG3Gf3T.png" alt="Ollama Model library"><br>進入選擇的 LLM 頁面，可以看到右上方存在指令 <code>ollama run &#123;model-name&#125;</code>。</p>
<p> 以 <strong>llama3.1</strong> 為例，進入 <strong>llama3.1</strong> 即可看到指令 <code>ollama run llama3.1</code>。<br><img src="https://i.imgur.com/kRvKRrI.png" alt="llama3.1"></p>
<p>每個 Model 可能會提供多個不同的 Tags。</p>
<p><img src="https://i.imgur.com/SH0gmPw.png" alt="llama3.1 Tags"><br>選擇不同的 Tags，可看到右上方跟著變動。<br><img src="https://i.imgur.com/kBjVC5j.png" alt="llama3.1"></p>
<h2 id="拉取模型"><a href="#拉取模型" class="headerlink" title="拉取模型"></a>拉取模型</h2><p>此處將以 <a target="_blank" rel="noopener" href="https://ollama.com/library/llama3.1">llama-3</a> 作為示範，前往 <code>llama3.1</code> 取得指令 <code>ollama run llama3.1</code><strong>。</strong><br><img src="https://i.imgur.com/2SxQNIf.png" alt="ollama run llama3.1"><br>先啟動已建置 Ollama 的 docker 。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker start &#123;ollama-container&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://i.imgur.com/t67jqct.png" alt="docker start {ollama-container}"><br>進入 Ollama 環境。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="built_in">exec</span> -it &#123;ollama-container-name&#125; bash</span><br></pre></td></tr></table></figure>

<p><img src="https://i.imgur.com/eB76YxF.png" alt="docker exec -it {ollama-container-name} bash"><br>將剛剛所取得的指令 ollama run llama3.1 ，其中的 run 修改為 pull 並執行 <code>ollama pull llama3.1</code>， 安裝指定 Model。</p>
<p><img src="https://i.imgur.com/y4bg3nQ.png" alt="ollama pull"></p>
<h1 id="使用-REST-API"><a href="#使用-REST-API" class="headerlink" title="使用 REST API"></a>使用 REST API</h1><h2 id="基本使用"><a href="#基本使用" class="headerlink" title="基本使用"></a>基本使用</h2><p>最基本使用 Ollama REST API 用法如下，model 輸入以抓取欲使用 model，prompt 為欲傳送訊息，stream 為回覆型態。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">curl http://localhost:11434/api/generate -d <span class="string">&#x27;&#123;</span></span><br><span class="line"><span class="string">  &quot;model&quot;: &quot;llama3.1&quot;,     </span></span><br><span class="line"><span class="string">  &quot;prompt&quot;:&quot;Why is the sky blue?&quot;,</span></span><br><span class="line"><span class="string">  &quot;stream&quot;: false</span></span><br><span class="line"><span class="string">&#125;&#x27;</span></span><br></pre></td></tr></table></figure>

<p>stream 預設為 true，會將對話一則一則段落即時回覆，如下。</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;model&quot;</span><span class="punctuation">:</span> <span class="string">&quot;llama3.1&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;created_at&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2024-09-02T06:25:39.228319203Z&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;response&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Hello&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;done&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;model&quot;</span><span class="punctuation">:</span> <span class="string">&quot;llama3.1&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;created_at&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2024-09-02T06:25:39.374906345Z&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;response&quot;</span><span class="punctuation">:</span> <span class="string">&quot;!&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;done&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;model&quot;</span><span class="punctuation">:</span> <span class="string">&quot;llama3.1&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;created_at&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2024-09-02T06:25:39.541984678Z&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;response&quot;</span><span class="punctuation">:</span> <span class="string">&quot; How&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;done&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;model&quot;</span><span class="punctuation">:</span> <span class="string">&quot;llama3.1&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;created_at&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2024-09-02T06:25:39.720058247Z&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;response&quot;</span><span class="punctuation">:</span> <span class="string">&quot; can&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;done&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;model&quot;</span><span class="punctuation">:</span> <span class="string">&quot;llama3.1&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;created_at&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2024-09-02T06:25:39.867611985Z&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;response&quot;</span><span class="punctuation">:</span> <span class="string">&quot; I&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;done&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;model&quot;</span><span class="punctuation">:</span> <span class="string">&quot;llama3.1&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;created_at&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2024-09-02T06:25:40.034881546Z&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;response&quot;</span><span class="punctuation">:</span> <span class="string">&quot; assist&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;done&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;model&quot;</span><span class="punctuation">:</span> <span class="string">&quot;llama3.1&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;created_at&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2024-09-02T06:25:40.187890875Z&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;response&quot;</span><span class="punctuation">:</span> <span class="string">&quot; you&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;done&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;model&quot;</span><span class="punctuation">:</span> <span class="string">&quot;llama3.1&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;created_at&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2024-09-02T06:25:40.337858348Z&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;response&quot;</span><span class="punctuation">:</span> <span class="string">&quot; today&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;done&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;model&quot;</span><span class="punctuation">:</span> <span class="string">&quot;llama3.1&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;created_at&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2024-09-02T06:25:40.482350409Z&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;response&quot;</span><span class="punctuation">:</span> <span class="string">&quot;?&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;done&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;model&quot;</span><span class="punctuation">:</span> <span class="string">&quot;llama3.1&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;created_at&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2024-09-02T06:25:40.624795493Z&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;response&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;done&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;done_reason&quot;</span><span class="punctuation">:</span> <span class="string">&quot;stop&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;context&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span>...<span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;total_duration&quot;</span><span class="punctuation">:</span> <span class="number">1713115362</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;load_duration&quot;</span><span class="punctuation">:</span> <span class="number">61573861</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;prompt_eval_count&quot;</span><span class="punctuation">:</span> <span class="number">12</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;prompt_eval_duration&quot;</span><span class="punctuation">:</span> <span class="number">212510000</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;eval_count&quot;</span><span class="punctuation">:</span> <span class="number">10</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;eval_duration&quot;</span><span class="punctuation">:</span> <span class="number">1396402000</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p>stream 若設為 false ，則會將完整對話作為一個 object 一次回傳，如下。</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;model&quot;</span><span class="punctuation">:</span> <span class="string">&quot;llama3.1&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;created_at&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2024-09-02T06:27:32.901873181Z&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;response&quot;</span><span class="punctuation">:</span> <span class="string">&quot;How are you today? Is there something I can help you with or would you like to chat?&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;done&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;done_reason&quot;</span><span class="punctuation">:</span> <span class="string">&quot;stop&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;context&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span>...<span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;total_duration&quot;</span><span class="punctuation">:</span> <span class="number">3418929502</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;load_duration&quot;</span><span class="punctuation">:</span> <span class="number">26092076</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;prompt_eval_count&quot;</span><span class="punctuation">:</span> <span class="number">12</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;prompt_eval_duration&quot;</span><span class="punctuation">:</span> <span class="number">167153000</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;eval_count&quot;</span><span class="punctuation">:</span> <span class="number">21</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;eval_duration&quot;</span><span class="punctuation">:</span> <span class="number">3174845000</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h2 id="持續對話"><a href="#持續對話" class="headerlink" title="持續對話"></a>持續對話</h2><p>欲打造有上下文的對話，呼叫方式如下。</p>
<p>model 輸入以抓取欲使用 model。</p>
<p>messages 內帶入下列欄位：</p>
<ul>
<li><code>role</code>: the role of the message, either <code>system</code>, <code>user</code>, <code>assistant</code>, or <code>tool</code></li>
<li><code>content</code>: the content of the message</li>
<li><code>images</code> (optional): a list of images to include in the message (for multimodal models such as <code>llava</code>)</li>
<li><code>tool_calls</code> (optional): a list of tools the model wants to use</li>
</ul>
<p>stream 若有設置，與上方同理。</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">curl http<span class="punctuation">:</span><span class="comment">//localhost:11434/api/chat -d &#x27;&#123;</span></span><br><span class="line">  <span class="attr">&quot;model&quot;</span><span class="punctuation">:</span> <span class="string">&quot;llama3.1&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;messages&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="punctuation">&#123;</span> <span class="attr">&quot;role&quot;</span><span class="punctuation">:</span> <span class="string">&quot;user&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;content&quot;</span><span class="punctuation">:</span> <span class="string">&quot;why is the sky blue?&quot;</span> <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;stream&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line"><span class="punctuation">&#125;</span>&#x27;</span><br></pre></td></tr></table></figure>

<p>回覆結果如下：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;model&quot;</span><span class="punctuation">:</span> <span class="string">&quot;llama3.1&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;created_at&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2024-09-02T06:36:45.157197126Z&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;message&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;role&quot;</span><span class="punctuation">:</span> <span class="string">&quot;assistant&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;content&quot;</span><span class="punctuation">:</span> <span class="string">&quot;The sky appears blue to us during the daytime due to a phenomenon called Rayleigh scattering. Here&#x27;s a simplified explanation:\n\n1. **Sunlight**: The sun emits all colors of light, including red, orange, yellow, green, and blue. When sunlight enters Earth&#x27;s atmosphere, it encounters tiny molecules of gases such as nitrogen (N2) and oxygen (O2).\n\n2. **Rayleigh Scattering**: These gas molecules are much smaller than the wavelength of visible light, so they scatter shorter wavelengths more efficiently than longer ones. Blue light has a relatively short wavelength, around 450-495 nanometers.\n\n3. **Scattered Light**: Because of this scattering effect, most of the blue light is dispersed in all directions and reaches our eyes from every part of the sky. Our atmosphere scatters the other colors (red, orange, yellow, and green) but to a much lesser extent, making them appear more concentrated near the sun.\n\n4. **What We See**: At any given time on Earth, we see only a small portion of the sun&#x27;s light because it takes longer for blue light to travel from the sun to us due to scattering. The shorter wavelength means that even though there is still plenty of sunlight hitting the Earth, the blue component gets scattered in all directions and reaches our eyes more easily.\n\n5. **Time of Day**: At sunrise and sunset, the sky can take on hues of red, orange, or yellow because we are seeing the light after it has passed through a thicker part of the atmosphere. This is why the sun itself appears less blue at these times; it&#x27;s mainly because the shorter wavelength (blue) light gets scattered away before reaching our eyes.\n\nIn summary, the sky appears blue to us during the daytime because of Rayleigh scattering, which preferentially scatters the short wavelengths (like blue light) in all directions.&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;done_reason&quot;</span><span class="punctuation">:</span> <span class="string">&quot;stop&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;done&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;total_duration&quot;</span><span class="punctuation">:</span> <span class="number">56644593603</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;load_duration&quot;</span><span class="punctuation">:</span> <span class="number">54908679</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;prompt_eval_count&quot;</span><span class="punctuation">:</span> <span class="number">17</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;prompt_eval_duration&quot;</span><span class="punctuation">:</span> <span class="number">847180000</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;eval_count&quot;</span><span class="punctuation">:</span> <span class="number">377</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;eval_duration&quot;</span><span class="punctuation">:</span> <span class="number">55692290000</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="帶有上下文的對話"><a href="#帶有上下文的對話" class="headerlink" title="帶有上下文的對話"></a>帶有上下文的對話</h3><p>同上示範，若想要對話伴隨著上下文，則隨著呼叫訊息與回覆結果疊加上 messages。</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">curl http<span class="punctuation">:</span><span class="comment">//localhost:11434/api/chat -d &#x27;&#123;</span></span><br><span class="line">  <span class="attr">&quot;model&quot;</span><span class="punctuation">:</span> <span class="string">&quot;llama3.1&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;messages&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;role&quot;</span><span class="punctuation">:</span> <span class="string">&quot;user&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;content&quot;</span><span class="punctuation">:</span> <span class="string">&quot;why is the sky blue?&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;role&quot;</span><span class="punctuation">:</span> <span class="string">&quot;assistant&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;content&quot;</span><span class="punctuation">:</span> <span class="string">&quot;dThe sky appears blue to us during the daytime due to a phenomenon....&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;role&quot;</span><span class="punctuation">:</span> <span class="string">&quot;user&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;content&quot;</span><span class="punctuation">:</span> <span class="string">&quot;how is that different than mie scattering?&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;stream&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line"><span class="punctuation">&#125;</span>&#x27;</span><br></pre></td></tr></table></figure>

<h1 id="參考來源"><a href="#參考來源" class="headerlink" title="參考來源"></a>參考來源</h1><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_40999403/article/details/139320266">https://blog.csdn.net/qq_40999403/article/details/139320266</a></p>
<p><a target="_blank" rel="noopener" href="https://hackmd.io/@whYPD8MBSHWRZV6y-ymFwQ/Hkf1O-SCa">https://hackmd.io/@whYPD8MBSHWRZV6y-ymFwQ/Hkf1O-SCa</a></p>
<p><a target="_blank" rel="noopener" href="https://ollama.qianniu.city/doc/Ollama%20Docker%20%E9%95%9C%E5%83%8F%E6%8C%87%E5%8D%97.html">https://ollama.qianniu.city/doc/Ollama Docker 镜像指南.html</a></p>
<p><a target="_blank" rel="noopener" href="https://medium.com/@siftikharm/build-your-own-llm-with-ollama-docker-fastapi-guide-eb49453548e2">https://medium.com/@siftikharm/build-your-own-llm-with-ollama-docker-fastapi-guide-eb49453548e2</a></p>
<p><a target="_blank" rel="noopener" href="https://medium.com/@shmilysyg/setup-rest-api-service-of-ai-by-using-local-llms-with-ollama-eb4b62c13b71">https://medium.com/@shmilysyg/setup-rest-api-service-of-ai-by-using-local-llms-with-ollama-eb4b62c13b71</a></p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="http://example.com">Weirou Sun</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章連結: </span><span class="post-copyright-info"><a href="http://example.com/di-duan-jian-zhi-ollama-llm/">http://example.com/di-duan-jian-zhi-ollama-llm/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版權聲明: </span><span class="post-copyright-info">本部落格所有文章除特別聲明外，均採用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 許可協議。轉載請註明來自 <a href="http://example.com" target="_blank">Weirou's Blog</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/python/">python</a><a class="post-meta__tags" href="/tags/Ollama/">Ollama</a><a class="post-meta__tags" href="/tags/AI/">AI</a><a class="post-meta__tags" href="/tags/LLM/">LLM</a></div><div class="post_share"><div class="social-share" data-image="/../images/profilePhoto.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="next-post pull-full"><a href="/llm/" title="LLM"><div class="cover" style="background: var(--default-bg-color)"></div><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">LLM</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相關推薦</span></div><div class="relatedPosts-list"><div><a href="/llm/" title="LLM"><div class="cover" style="background: var(--default-bg-color)"></div><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-09-03</div><div class="title">LLM</div></div></a></div><div><a href="/di-yi-pian-wen-zhang/" title="Poetry：Python套件管理器"><div class="cover" style="background: var(--default-bg-color)"></div><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-03-20</div><div class="title">Poetry：Python套件管理器</div></div></a></div><div><a href="/vercel-python-version-conflict/" title="Vercel Python Version Conflict"><div class="cover" style="background: var(--default-bg-color)"></div><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-05-10</div><div class="title">Vercel Python Version Conflict</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/../images/profilePhoto.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">Weirou Sun</div><div class="author-info__description"></div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">4</div></a><a href="/tags/"><div class="headline">標籤</div><div class="length-num">5</div></a><a href="/categories/"><div class="headline">分類</div><div class="length-num">1</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/Weirou-Sun"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="mailto:www28385374@gmail.com" target="_blank" title="Email"><i class="fas fa-envelope" style="color: #4a7dbe;"></i></a></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目錄</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%9C%B0%E7%AB%AF%E5%BB%BA%E7%BD%AE-Ollama-LLM"><span class="toc-number">1.</span> <span class="toc-text">地端建置 Ollama LLM</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Ollama"><span class="toc-number">2.</span> <span class="toc-text">Ollama</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%8B%E7%B4%B9"><span class="toc-number">2.1.</span> <span class="toc-text">介紹</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%98%AF%E7%94%9A%E9%BA%BC%EF%BC%9F"><span class="toc-number">2.1.1.</span> <span class="toc-text">是甚麼？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%84%AA%E9%BB%9E"><span class="toc-number">2.1.2.</span> <span class="toc-text">優點</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%89%E8%A3%9D"><span class="toc-number">2.2.</span> <span class="toc-text">安裝</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E8%A3%9D%E6%96%B9%E5%BC%8F"><span class="toc-number">2.2.1.</span> <span class="toc-text">安裝方式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Docker-%E5%AE%89%E8%A3%9D-Ollama"><span class="toc-number">2.2.2.</span> <span class="toc-text">Docker 安裝 Ollama</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E6%8C%87%E5%AE%9A-LLM"><span class="toc-number">3.</span> <span class="toc-text">使用指定 LLM</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%81%B8%E6%93%87%E6%A8%A1%E5%9E%8B"><span class="toc-number">3.1.</span> <span class="toc-text">選擇模型</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8B%89%E5%8F%96%E6%A8%A1%E5%9E%8B"><span class="toc-number">3.2.</span> <span class="toc-text">拉取模型</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8-REST-API"><span class="toc-number">4.</span> <span class="toc-text">使用 REST API</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8"><span class="toc-number">4.1.</span> <span class="toc-text">基本使用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8C%81%E7%BA%8C%E5%B0%8D%E8%A9%B1"><span class="toc-number">4.2.</span> <span class="toc-text">持續對話</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B8%B6%E6%9C%89%E4%B8%8A%E4%B8%8B%E6%96%87%E7%9A%84%E5%B0%8D%E8%A9%B1"><span class="toc-number">4.2.1.</span> <span class="toc-text">帶有上下文的對話</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%8F%83%E8%80%83%E4%BE%86%E6%BA%90"><span class="toc-number">5.</span> <span class="toc-text">參考來源</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/di-duan-jian-zhi-ollama-llm/" title="地端建置-Ollama-LLM">地端建置-Ollama-LLM</a><time datetime="2024-09-03T12:19:16.000Z" title="發表於 2024-09-03 20:19:16">2024-09-03</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/llm/" title="LLM">LLM</a><time datetime="2024-09-03T12:18:21.000Z" title="發表於 2024-09-03 20:18:21">2024-09-03</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/vercel-python-version-conflict/" title="Vercel Python Version Conflict">Vercel Python Version Conflict</a><time datetime="2024-05-10T08:01:41.000Z" title="發表於 2024-05-10 16:01:41">2024-05-10</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/di-yi-pian-wen-zhang/" title="Poetry：Python套件管理器">Poetry：Python套件管理器</a><time datetime="2024-03-20T09:07:43.000Z" title="發表於 2024-03-20 17:07:43">2024-03-20</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('/../images/banner.jpg')"><div id="footer-wrap"><div class="copyright">&copy;2024 By Weirou Sun</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主題 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">Welcome to my <a target="_blank" rel="noopener" href="https://weirou-sun.github.io/">blog</a>!</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="閱讀模式"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="簡繁轉換">繁</button><button id="darkmode" type="button" title="淺色和深色模式轉換"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="單欄和雙欄切換"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="設定"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目錄"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="返回頂部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=4.13.0"></script><script src="/js/main.js?v=4.13.0"></script><script src="/js/tw_cn.js?v=4.13.0"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar@0.1.16/dist/snackbar.min.js"></script><div class="js-pjax"></div><script id="click-heart" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/dist/click-heart.min.js" async="async" mobile="false"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>